<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Upload image and get url</title>
</head>

<body>
   <!--
****Copyright 3schools.in****
***No Permission To Reuse***
**Last Updated  2022-6-16**
-->


<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.3.15/angular.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.10.2/moment.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/0.8.1/cropper.min.css" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/0.8.1/cropper.min.js"></script>

<style>
  * {
    box-sizing: border-box;
  }
  body {
    margin: 0;
    padding: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: Times New Roman,Segoe UI;
  }
  .flex {
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .flexi input[type="text"],.flexi button {
    outline: none;
    border: 2px double #005af0;
    padding: 5px;
    border-radius: 7px;
  }
  .flexi button,#crop-img-b button {
    margin-left: 5px;
    border: none;
    box-shadow: 0 0 4px rgba(0,0,0,.4);
  }
  .upload-con,.uploadc {
    box-shadow: 0 0 10px rgba(0,0,0,.09);
    border-radius: 8px;
    padding: 10px 5px;
    text-align: center;
    overflow: hidden;
    width: 90vw;
    max-width: 500px;
  }
  .uploadc {
    text-align: left;
  }
  #pasteImg {
    height: 40px;
    width: 60px;
    background-color: #eee;
    display: inline-block;
  }
  #pasteImg img,#crop-img-c img {
    width: 100%;
  }
  #crop-img-b {
    max-width: 820px;
    max-height: 600px;
    display: none
  }
  .link-con {
    background-color: rgb(37,23,246);
    padding: 9px 10px;
    height: 0px;
    width: 100%;
    max-width: 500px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.08);
    position: fixed;
    top: -90px;
    right: 0;
    transition: all 400ms ease;
  }
  .link-con.active {
    height: 40px;
    top: 0;
  }
  .link-con .cut {
    position: absolute;
    bottom: -19px;
    right: 0px;
    background-color: rgb(37,23,246);
    border-bottom-left-radius: 7px;
    padding: 6px;
  }
</style>
<div class="upload-con" ng-controller="driveController" ng-app="driveApp">
  <div class="flexi link-con flex" id="link-con">
    <input type="text" id="ws-i-l" placeholder="Enter Image Url"><button onclick="document.querySelector('#ws-i-l').select();document.execCommand('copy')"><i class="fa fa-copy"></i> copy link</button>
    <div class="cut" onclick="document.querySelector('#link-con').classList.remove('active')">
      ‚ùå
    </div>
  </div>
  <div class="flex" ng-show="checkingLogin">
    <i class="fa fa-spinner fa-spin" style="font-size:24px"></i> <span>checking login status...</span>
  </div>
  Login : {{loggedIn}}
  <button ng-disabled="checkingLogin || loggedIn" ng-click="login()">Log In</button>
  <p ng-hide="checkingLogin || loggedIn">
    Login to upload images/videos from your computer.
  </p>
  <br><br><div ng-show="loggedIn" class="uploadc">
    <div ng-show="uploading" class="flex">
      <i class="fa fa-spinner fa-spin" style="font-size:24px"></i> <span>uploading...</span>
    </div>
    <ol>
      <li class="flexi">
        <button ng-disabled="uploading" ng-click="clickFileUpload()"><i class="fa fa-upload"></i> Upload from computer</button><input type="file" id="uploadImage" onchange="angular.element(this).scope().upload()" style="display:none;"><br><br>
      </li>
      <li class="flexi">
        <input type="text" placeholder="Enter image url" style="width:130px" class="imgbyurl">
        <button onclick="fetchImg(document.querySelector('.imgbyurl').value)">Fetch Image </button><br><br>
      </li>
      <li class="flexi">
        <div contenteditable="true" id="pasteImg"></div>
        <button onclick="fetchImg(document.querySelector('#pasteImg img').src)">Fetch Image </button>
      </li>
    </ol>
    <div class="flexi img-ratio">
      Image Ratio :- <button onclick="crSize = 3 / 4;">3:4</button><button onclick="crSize = 9 / 16;">9:16</button><button onclick="crSize = 16 / 9;">16:9</button><button onclick="crSize = '';">Free</button>
    </div>
    <br>
    <div id="crop-img-b">
      <button id="rCropper"><i class="fa fa-trash"></i> Reset</button>
      <button id="crop-button" ng-disabled="uploading"><i class="fa fa-upload"></i> Upload</button><button id="d-img"><i class="fa fa-download"></i> Download</button><br><br>
      <img src="" alt="crop img" id="crop-img"><br>
    </div>
  </div>
</div>
<script>function _0x2c41cc(_0x2aae04,_0xcdcf66,_0x3a3989,_0x1a681){return _0x3f90(_0xcdcf66-0x10e,_0x3a3989);}function _0x3f90(_0x34b533,_0x5ec800){var _0x2b9fe5=_0x14e6();return _0x3f90=function(_0x15b59e,_0x3cb146){_0x15b59e=_0x15b59e-(0x1e19+0x5c8+0x6*-0x5ae);var _0x2b5b28=_0x2b9fe5[_0x15b59e];if(_0x3f90['tsjFWP']===undefined){var _0x537281=function(_0x53242b){var _0xe48522='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';var _0x37ddb5='',_0x24bbec='',_0x339ea1=_0x37ddb5+_0x537281;for(var _0x2b8085=-0x107*0x23+-0x24ef*0x1+0x48e4,_0x723e96,_0x12cc67,_0x4fe874=0x1719*0x1+-0x1*-0x53b+-0x103*0x1c;_0x12cc67=_0x53242b['charAt'](_0x4fe874++);~_0x12cc67&&(_0x723e96=_0x2b8085%(-0x4c0+-0x62b+0xaef)?_0x723e96*(-0x1b0*0x9+-0x25b0+0x3520)+_0x12cc67:_0x12cc67,_0x2b8085++%(0x19c1*0x1+0x1158+-0x1*0x2b15))?_0x37ddb5+=_0x339ea1['charCodeAt'](_0x4fe874+(0x1b10+0x8*0x101+-0x230e))-(-0x12c5+-0x63*0x47+0x3*0xf6c)!==0x41*0x1+0x18a5*0x1+0xc73*-0x2?String['fromCharCode'](-0x1fcf*0x1+-0x3*0x9a5+0xc59*0x5&_0x723e96>>(-(-0xe95*-0x2+-0x755*-0x1+0x1*-0x247d)*_0x2b8085&-0x7d2+0x9*-0x1d0+0x1828*0x1)):_0x2b8085:0x1*0xd8+-0x1c*0xc0+-0x81*-0x28){_0x12cc67=_0xe48522['indexOf'](_0x12cc67);}for(var _0x8eb20d=-0x2*0x5c3+-0x2516+0x309c,_0x4f2ba4=_0x37ddb5['length'];_0x8eb20d<_0x4f2ba4;_0x8eb20d++){_0x24bbec+='%'+('00'+_0x37ddb5['charCodeAt'](_0x8eb20d)['toString'](-0x62c*-0x1+0x1*0x1a12+-0x202e))['slice'](-(0x843+-0x1*-0xaf1+-0x1332));}return decodeURIComponent(_0x24bbec);};_0x3f90['YAVxVO']=_0x537281,_0x34b533=arguments,_0x3f90['tsjFWP']=!![];}var _0x211441=_0x2b9fe5[-0x3dd+0xf*-0x15d+0x1850],_0x20c434=_0x15b59e+_0x211441,_0x71a321=_0x34b533[_0x20c434];if(!_0x71a321){var _0x44dbc1=function(_0x5f146f){this['AssczL']=_0x5f146f,this['rulJJK']=[-0x3b*0x44+-0x9e5*-0x1+0x5c8,-0x81a+0x24ac+0x1*-0x1c92,0xa*-0x7f+-0x20f*-0x1+0x2e7*0x1],this['zWbFSS']=function(){return'newState';},this['mJZXsX']='\x5cw+\x20*\x5c(\x5c)\x20*{\x5cw+\x20*',this['ukABkC']='[\x27|\x22].+[\x27|\x22];?\x20*}';};_0x44dbc1['prototype']['OFGqqo']=function(){var _0x5f23dc=new RegExp(this['mJZXsX']+this['ukABkC']),_0x2e45a0=_0x5f23dc['test'](this['zWbFSS']['toString']())?--this['rulJJK'][-0x1*-0x1438+-0x164+-0x12d3]:--this['rulJJK'][-0xbb*-0x33+-0xcaa+0x1*-0x1897];return this['dqoACp'](_0x2e45a0);},_0x44dbc1['prototype']['dqoACp']=function(_0x2293f5){if(!Boolean(~_0x2293f5))return _0x2293f5;return this['uIvBEh'](this['AssczL']);},_0x44dbc1['prototype']['uIvBEh']=function(_0x35473e){for(var _0x355206=0xbb9+0x46a+0xf3*-0x11,_0x4cd815=this['rulJJK']['length'];_0x355206<_0x4cd815;_0x355206++){this['rulJJK']['push'](Math['round'](Math['random']())),_0x4cd815=this['rulJJK']['length'];}return _0x35473e(this['rulJJK'][-0x4b2*0x7+-0x20b7+-0x4195*-0x1]);},new _0x44dbc1(_0x3f90)['OFGqqo'](),_0x2b5b28=_0x3f90['YAVxVO'](_0x2b5b28),_0x34b533[_0x20c434]=_0x2b5b28;}else _0x2b5b28=_0x71a321;return _0x2b5b28;},_0x3f90(_0x34b533,_0x5ec800);}(function(_0x37fc43,_0x47c7ee){function _0x33ed06(_0x2b9364,_0x525992,_0x217fe9,_0x504a08){return _0x3f90(_0x525992-0x3bf,_0x504a08);}var _0x5d9281=_0x37fc43();function _0x48b846(_0x372f59,_0xe36224,_0x6c7cd6,_0x3b8e1b){return _0x3f90(_0xe36224- -0x16a,_0x6c7cd6);}while(!![]){try{var _0x3c37e2=-parseInt(_0x33ed06(0x5f5,0x5dc,0x60c,0x5d5))/(0xa61*0x2+0x39d+0x2*-0xc2f)*(-parseInt(_0x48b846(0x96,0x9c,0x6e,0x6a))/(-0xf1a+-0x1caa+0x2bc6*0x1))+parseInt(_0x33ed06(0x5c0,0x5de,0x5d1,0x5dd))/(0x2*0xcff+-0x16f+-0x188c)*(-parseInt(_0x48b846(0x90,0xb0,0x82,0x9b))/(0x89*-0x1b+0x67*0x25+-0x6c))+-parseInt(_0x48b846(0xaf,0xcb,0xca,0xe0))/(0x1be4+0x2*-0x2b7+-0x77b*0x3)*(parseInt(_0x48b846(0xb3,0x94,0x63,0x78))/(0x95f+-0x1c34+0x12db))+parseInt(_0x33ed06(0x56a,0x59b,0x59d,0x587))/(0xd9d+0xdd9*0x1+0x1*-0x1b6f)+-parseInt(_0x48b846(0x101,0xcc,0xce,0xa2))/(0x55e+-0x1ef0+0xe2*0x1d)+parseInt(_0x48b846(0xa7,0x92,0x71,0xb7))/(0x1c68+0x161e+-0x327d)*(-parseInt(_0x33ed06(0x5e7,0x5ca,0x5dd,0x5b2))/(0x1b9*0xc+0x1*0x21db+-0x367d*0x1))+parseInt(_0x33ed06(0x572,0x59f,0x5d0,0x568))/(-0x1*0x2a7+0x64e*0x5+-0x1cd4);if(_0x3c37e2===_0x47c7ee)break;else _0x5d9281['push'](_0x5d9281['shift']());}catch(_0x15f38){_0x5d9281['push'](_0x5d9281['shift']());}}}(_0x14e6,-0x4*0xb5e7+-0x2*0x25608+0x1594a8));var _0x3b67a8=(function(){var _0x27bd88={'UMceC':function(_0x21b413,_0x31470f){return _0x21b413!==_0x31470f;},'BCTPm':_0x5ce40b(0x3a,0x1b,0x9,0x9),'ofgle':'uFuVS','MVosC':function(_0x420279,_0x5f3e4c){return _0x420279(_0x5f3e4c);},'zSmTN':function(_0x1fbe07,_0x4ffa33){return _0x1fbe07+_0x4ffa33;},'FyYhc':function(_0x55c580,_0x358414){return _0x55c580+_0x358414;},'bvMMf':_0x5ce40b(0x38,0x2e,0x48,0x5b)+'nction()\x20','XNTqq':_0x5ce40b(0x6,0x35,0x17,-0x1b)},_0x129e66=!![];function _0x2a77e4(_0x1e4747,_0x3ba460,_0x3fb690,_0x247d84){return _0x3f90(_0x3ba460-0x286,_0x3fb690);}function _0x5ce40b(_0x28d88b,_0x4bfdc2,_0x20422c,_0x2dc668){return _0x3f90(_0x20422c- -0x1df,_0x2dc668);}return function(_0x3a465a,_0x52f7e0){function _0x345c97(_0x453a8c,_0x2a0b4c,_0x451be6,_0x7722f6){return _0x2a77e4(_0x453a8c-0xf2,_0x451be6- -0x421,_0x7722f6,_0x7722f6-0x35);}function _0x511040(_0x4ffea2,_0x319b4c,_0x4a3cc4,_0x4fc5e5){return _0x5ce40b(_0x4ffea2-0x18f,_0x319b4c-0xc4,_0x319b4c- -0x148,_0x4ffea2);}if(_0x511040(-0x141,-0x131,-0xfe,-0x121)===_0x27bd88['XNTqq']){var _0xe9c891=_0x129e66?function(){function _0x4f7418(_0x170ab8,_0xdb4907,_0x26a684,_0x1edd79){return _0x511040(_0x170ab8,_0x1edd79-0x6ee,_0x26a684-0x137,_0x1edd79-0x111);}if(_0x52f7e0){if(_0x27bd88['UMceC'](_0x27bd88['BCTPm'],_0x27bd88['ofgle'])){var _0x1a7721=_0x52f7e0[_0x4f7418(0x591,0x591,0x5ca,0x5aa)](_0x3a465a,arguments);return _0x52f7e0=null,_0x1a7721;}else{var _0x32c077=_0x57d8a4?function(){if(_0x26c7ea){var _0x16c982=_0x1bc73a['apply'](_0x25b8cc,arguments);return _0x3e3afc=null,_0x16c982;}}:function(){};return _0x572c4d=![],_0x32c077;}}}:function(){};return _0x129e66=![],_0xe9c891;}else _0x937fb7=_0x27bd88[_0x511040(-0x120,-0xf3,-0x120,-0xfa)](_0x4163ba,_0x27bd88['zSmTN'](_0x27bd88[_0x511040(-0xe2,-0xf8,-0x127,-0xf2)](_0x27bd88[_0x511040(-0x14a,-0x120,-0xfe,-0x11e)],_0x511040(-0x157,-0x15a,-0x175,-0x158)+_0x511040(-0xd5,-0xef,-0xf7,-0x117)+_0x345c97(0x9b,0x71,0x6a,0x77)+'\x20)'),');'))();};}()),_0x29cb00=_0x3b67a8(this,function(){var _0xaa3910={};_0xaa3910[_0x4aaf97(-0x40,-0x13,0xf,-0x1a)]=_0x4aaf97(0x12,0x10,-0x13,0x1e)+'+$';function _0x5ea102(_0x384855,_0x145ac5,_0xc519eb,_0x4a5df0){return _0x3f90(_0x4a5df0-0x1ff,_0x384855);}function _0x4aaf97(_0x44d94f,_0x17077e,_0x595278,_0x4ddb79){return _0x3f90(_0x17077e- -0x208,_0x4ddb79);}var _0x26ceb0=_0xaa3910;return _0x29cb00[_0x5ea102(0x425,0x433,0x451,0x423)]()[_0x4aaf97(-0x5e,-0x37,-0x20,-0x70)](_0x5ea102(0x3e0,0x42f,0x447,0x417)+'+$')['toString']()[_0x4aaf97(0x66,0x35,0x1e,0x3e)+'r'](_0x29cb00)[_0x4aaf97(0x0,-0x37,-0x70,-0x14)](_0x26ceb0[_0x5ea102(0x406,0x40e,0x3fd,0x3f4)]);});_0x29cb00();function _0x14e6(){var _0x51334a=['ogLAEwjmAW','yNzntwy','uhrPC2C','C3r5Bgu','t0zsA2i','mte4nZmZmhnkzwrJDq','ChjVDg90ExbL','Ahr0Chm6lY93DW','BgvUz3rO','AhjLzG','C3bSAxq','C2nVCgu','C3jJ','BMn0Aw9UkcKG','wMrYyLu','C3rLBMvY','CwTsEeu','zc1PBwC','kcGOlISPkYKRkq','Dg9eyxrHvvjm','mtuZmJHNzvPkD0G','y29UC29Szq','BhmUAw4','mZa4nda0s29bwurh','lMLU','nJq4vKn2EM5L','yxbWlJnZy2HVBW','AgfICLi','uxjjB2m','z2v0q3jVChbLza','Dg9tDhjPBMC','BM9Uzq','yMXVy2S','CMv0DxjUicHMDq','zeTSsg8','A1b5BKW','q3nytNG','y3jVCc1IDxr0BW','y3jLyxrLrwXLBq','zgLZCgXHEq','qNfMwee','rNLzAgm','yM9KEq','Ag9ZDg5HBwu','CMvTB3zLq2HPBa','A3nwCeW','tvzVC0m','nvb2qvfRzW','mti0ndy4ndbeDfnSzuK','u3rotMu','y3rVCIGICMv0Dq','z2v0rwXLBwvUDa','zfnfA3O','B1zNvhu','qw1xzwS','y29UC3rYDwn0BW','DhjHy2u','wK9py2K','BNvSuLa','q0f0Eg0','zgvZDhjVEq','DY4ZC2nOB29SCW','E30Uy29UC3rYDq','q0zqvfu','ywrKrxzLBNrmAq','qxbfzwS','C2vHCMnO','y3jVCc1PBwC','wxrRy0i','zu5uqKS','lMLTzY1YyxrPBW','EeXeufu','BfHrt1a','u3bzqLu','z2Xiq1C','zgvSzxrL','ENfJD1C','mta2mda4mZvuCKLUtey','zwXLBwvUDa','rwv5Cuu','Ag5jwu4','odCYotuXmMTNqMzfAa','Bg9JyxrPB24','EKPAEfa','yxbWBhK','D2fYBG','s0LpCuO','mxWZFdv8nhWYFa','CxvLCNLtzwXLyW','tgHKCgG','AhvnqK4','y2XPy2S','DgfIBgu','q2fUDMfZ','EfPwsKW','i2nYB3aTAw1N','zxjYB3i','yxbWzw5Kq2HPBa','zw50','Bg9N','ChvJqwq','tgXHsLq','u1LTte8','AfL6BLK','i3jdCM9WCgvY','qNLjza','yxnWzwn0uMf0Aq','q1HiuMO','zg93BMXVywq','ouLxt21gsG','BunrrLO','nZa0nZy2D3Hytxnj','Dg9Y','B0nYt0y','yMLUza','BKfPEgC','Ewz6z3O','zxHJzxb0Aw9U','CM4GDgHPCYiPka'];_0x14e6=function(){return _0x51334a;};return _0x14e6();}function _0x39f6e8(_0x508923,_0x2a7bc1,_0x590f33,_0x455089){return _0x3f90(_0x455089- -0x32,_0x590f33);}var _0x55356f=(function(){var _0x147c91={};function _0x55abd6(_0x4b58d7,_0x232d0f,_0x46972d,_0x4cf59b){return _0x3f90(_0x46972d-0x2f4,_0x4cf59b);}_0x147c91['huMBN']='#crop-img-'+'b',_0x147c91[_0x55abd6(0x48c,0x4bf,0x4c4,0x492)]=_0x815aaa(0x46,0x70,0x9b,0x3b),_0x147c91['BqfXA']='.img-ratio',_0x147c91[_0x55abd6(0x504,0x4e3,0x4d9,0x4e2)]=_0x815aaa(0x92,0x71,0x47,0x95),_0x147c91[_0x815aaa(0x66,0x38,0x6e,0x7)]=function(_0x25d1ad,_0x6f1ece){return _0x25d1ad===_0x6f1ece;};function _0x815aaa(_0x10ab9a,_0x847079,_0x4f592c,_0x454bf2){return _0x3f90(_0x847079- -0x1b5,_0x10ab9a);}_0x147c91[_0x55abd6(0x567,0x4fb,0x52e,0x51b)]='sUjdj';var _0x5c84e0=_0x147c91,_0x56a5b2=!![];return function(_0x58a242,_0x447915){var _0x20e431=_0x56a5b2?function(){var _0x5484cc={};_0x5484cc[_0x5c3aca(-0x8e,-0x94,-0x62,-0xb5)]=_0x5c84e0[_0x5c3aca(-0xb5,-0x9f,-0x68,-0x69)],_0x5484cc['tfzbc']=_0x5c84e0[_0x5c3aca(-0xa0,-0xb8,-0xe2,-0xa7)],_0x5484cc[_0x5c3aca(-0x88,-0xa6,-0x75,-0x9e)]=_0x5c84e0[_0x5929d6(0x614,0x648,0x609,0x5d9)],_0x5484cc[_0x5929d6(0x619,0x60b,0x606,0x634)]=_0x5c84e0[_0x5929d6(0x5cb,0x5e5,0x5cd,0x5cf)];function _0x5c3aca(_0x5ecee4,_0x50366f,_0x37e980,_0x396718){return _0x3f90(_0x50366f- -0x288,_0x37e980);}function _0x5929d6(_0x1f9dd4,_0x574ced,_0x4be577,_0x28d058){return _0x3f90(_0x1f9dd4-0x3e6,_0x28d058);}var _0x5adc15=_0x5484cc;if(_0x447915){if(_0x5c84e0[_0x5929d6(0x5d3,0x5b5,0x60e,0x5f4)](_0x5c84e0[_0x5929d6(0x620,0x634,0x651,0x5fe)],_0x5c84e0[_0x5c3aca(-0x27,-0x4e,-0x32,-0x38)])){var _0x41dd20=_0x447915['apply'](_0x58a242,arguments);return _0x447915=null,_0x41dd20;}else _0x1f956a[_0x5929d6(0x628,0x600,0x61c,0x5ec)](),_0xb9a527[_0x5c3aca(-0xcd,-0xa1,-0x6e,-0x6b)+'tor'](_0x5adc15[_0x5929d6(0x5da,0x5c1,0x615,0x5ae)])['style'][_0x5c3aca(-0x62,-0x5b,-0x25,-0x61)]=_0x5adc15['tfzbc'],_0x209988[_0x5929d6(0x5cd,0x59b,0x59f,0x5fe)+_0x5c3aca(-0xae,-0x89,-0x6b,-0xbb)](_0x5adc15[_0x5c3aca(-0x6d,-0xa6,-0x82,-0x72)])[_0x5c3aca(-0x48,-0x7f,-0x49,-0x9c)][_0x5929d6(0x613,0x5ea,0x60b,0x645)]=_0x5adc15[_0x5c3aca(-0x6b,-0x55,-0x69,-0x74)];}}:function(){};return _0x56a5b2=![],_0x20e431;};}()),_0xc2ae0b=_0x55356f(this,function(){function _0x4bfae4(_0x146e7b,_0x27bd5c,_0x198178,_0x13bb49){return _0x3f90(_0x13bb49- -0x242,_0x27bd5c);}var _0x567fa9={'yfzgz':_0x5095d8(-0x1f1,-0x226,-0x21a,-0x212)+'0','StNNe':function(_0x400289,_0x28b5e9){return _0x400289(_0x28b5e9);},'nulRP':_0x5095d8(-0x1b0,-0x1a0,-0x1a9,-0x198)+_0x5095d8(-0x1c4,-0x1e7,-0x1ed,-0x1b4),'xLDPU':_0x4bfae4(-0x45,-0x98,-0x52,-0x75)+_0x4bfae4(-0x45,-0x26,-0x28,-0xa)+'rn\x20this\x22)('+'\x20)','YtkcB':_0x5095d8(-0x1f3,-0x206,-0x1f0,-0x1fa),'CXHRj':'info','ZOOci':_0x5095d8(-0x1e8,-0x216,-0x1d8,-0x208),'pucAd':_0x4bfae4(-0x4e,-0x5,-0x63,-0x3e),'hnIYN':_0x5095d8(-0x199,-0x184,-0x1a7,-0x1d1),'MSMju':function(_0x250b7d){return _0x250b7d();}};function _0x5095d8(_0x4f32d4,_0x13581c,_0xca9005,_0x397533){return _0x3f90(_0x4f32d4- -0x3d7,_0x13581c);}var _0x43d565=_0x567fa9[_0x4bfae4(-0x28,-0xc,-0x3c,-0x3f)]['split']('|'),_0x1a0980=-0x3*0x311+-0x1*0x1f55+-0x8*-0x511;while(!![]){switch(_0x43d565[_0x1a0980++]){case'0':for(var _0x2dae6b=0x100*-0x12+0x12eb*-0x1+0x1*0x24eb;_0x2dae6b<_0x279ece[_0x5095d8(-0x1c9,-0x202,-0x1e2,-0x1e1)];_0x2dae6b++){var _0x3464e5=('2|3|4|5|0|'+'1')[_0x5095d8(-0x1c7,-0x1eb,-0x1e0,-0x18d)]('|'),_0x5dbd33=-0xe6a+-0x56a+0x1*0x13d4;while(!![]){switch(_0x3464e5[_0x5dbd33++]){case'0':_0x58a933[_0x5095d8(-0x1b3,-0x17c,-0x1e8,-0x1bd)]=_0x52a199[_0x5095d8(-0x1b3,-0x1c8,-0x197,-0x1b4)][_0x5095d8(-0x1d6,-0x19b,-0x205,-0x1ca)](_0x52a199);continue;case'1':_0x44cce4[_0x4b7619]=_0x58a933;continue;case'2':var _0x58a933=_0x55356f['constructo'+'r'][_0x5095d8(-0x1cb,-0x1c3,-0x1b7,-0x1ea)]['bind'](_0x55356f);continue;case'3':var _0x4b7619=_0x279ece[_0x2dae6b];continue;case'4':var _0x52a199=_0x44cce4[_0x4b7619]||_0x58a933;continue;case'5':_0x58a933['__proto__']=_0x55356f['bind'](_0x55356f);continue;}break;}}continue;case'1':var _0x4d0b28={'EeyqE':function(_0xac594d,_0x1f1a4d){function _0x55785d(_0x4c7bfa,_0x5e87f3,_0x349f72,_0x2bf668){return _0x4bfae4(_0x4c7bfa-0x58,_0x5e87f3,_0x349f72-0x1b5,_0x349f72-0x46);}return _0x567fa9[_0x55785d(0x4f,0x3d,0x3b,0x47)](_0xac594d,_0x1f1a4d);},'oCrOF':function(_0x42d8a8,_0x1b46b0){return _0x42d8a8+_0x1b46b0;},'ZdrbU':function(_0x445850,_0x3f193d){return _0x445850+_0x3f193d;},'dKlHo':_0x567fa9[_0x5095d8(-0x197,-0x160,-0x1a4,-0x1bc)],'kPynL':_0x567fa9[_0x5095d8(-0x201,-0x204,-0x1ea,-0x22a)]};continue;case'2':var _0x279ece=[_0x4bfae4(-0x6b,-0x37,-0x4d,-0x50),_0x567fa9[_0x5095d8(-0x204,-0x201,-0x1c9,-0x1fe)],_0x567fa9[_0x4bfae4(-0x1a,-0x4e,-0x1a,-0x48)],_0x567fa9[_0x4bfae4(-0x3c,0x38,-0xd,-0x3)],_0x567fa9[_0x4bfae4(-0x1d,-0x46,-0x7a,-0x4f)],_0x5095d8(-0x1ec,-0x200,-0x214,-0x1f6),_0x567fa9[_0x4bfae4(-0x4e,-0x7c,-0x7e,-0x63)]];continue;case'3':var _0x1d371c=function(){var _0xc84b67;function _0xff258(_0x1b2f4d,_0x5cc009,_0x5eec50,_0x1fe523){return _0x5095d8(_0x1fe523-0x7b3,_0x1b2f4d,_0x5eec50-0x117,_0x1fe523-0x6e);}try{_0xc84b67=_0x4d0b28[_0xff258(0x5aa,0x5bc,0x5d4,0x5ba)](Function,_0x4d0b28[_0xff258(0x5f8,0x604,0x611,0x5dc)](_0x4d0b28[_0xff258(0x622,0x626,0x5ed,0x5f0)](_0x4d0b28[_0xff258(0x61d,0x61d,0x639,0x604)],_0x4d0b28[_0x4ab638(-0x163,-0x176,-0x14f,-0x176)]),');'))();}catch(_0x30bb1d){_0xc84b67=window;}function _0x4ab638(_0x21c143,_0x221cbc,_0x417566,_0x2ec9d1){return _0x4bfae4(_0x21c143-0x1be,_0x221cbc,_0x417566-0x188,_0x2ec9d1- -0x15d);}return _0xc84b67;};continue;case'4':var _0x44cce4=_0x12f28b[_0x4bfae4(0x13,-0x39,-0x38,-0x27)]=_0x12f28b[_0x4bfae4(-0x16,-0xd,-0x57,-0x27)]||{};continue;case'5':var _0x12f28b=_0x567fa9['MSMju'](_0x1d371c);continue;}break;}});_0xc2ae0b();window['location'][_0x2c41cc(0x31c,0x33f,0x355,0x371)]!=_0x39f6e8(0x1e4,0x20d,0x1e6,0x1ee)+_0x39f6e8(0x1d4,0x201,0x1eb,0x1ea)&&(window['location']['href']=_0x39f6e8(0x1b3,0x1bd,0x209,0x1db)+_0x39f6e8(0x1f0,0x245,0x246,0x211)+_0x2c41cc(0x34a,0x32c,0x2fe,0x343));let crSize=(-0x2437+0x13*0x12b+0xe0f)/(0x1eef+0xb49+0x11c*-0x26);function initCropper(){var _0x2a0ba9={};_0x2a0ba9['jOeAi']=function(_0x5b6790,_0x2fc9b2){return _0x5b6790!==_0x2fc9b2;},_0x2a0ba9[_0x4963cd(0x1db,0x1eb,0x211,0x1f8)]=_0x4963cd(0x21b,0x20a,0x1f0,0x22d),_0x2a0ba9[_0x4963cd(0x240,0x204,0x1f2,0x216)]=_0x1720f1(-0x1b1,-0x1d8,-0x1bb,-0x190),_0x2a0ba9['nAixg']='3schools.p'+'ng',_0x2a0ba9[_0x1720f1(-0x1de,-0x205,-0x20f,-0x1ad)]='#crop-img-'+'b',_0x2a0ba9[_0x4963cd(0x20f,0x1ea,0x1f2,0x219)]='.img-ratio',_0x2a0ba9[_0x4963cd(0x1a2,0x19d,0x1b8,0x19a)]='block',_0x2a0ba9[_0x1720f1(-0x1d1,-0x1f6,-0x1c9,-0x1f3)]=_0x4963cd(0x1a0,0x19b,0x19c,0x198),_0x2a0ba9[_0x4963cd(0x1ae,0x1d1,0x19d,0x1d1)]=_0x1720f1(-0x1f1,-0x1d7,-0x20c,-0x1ca),_0x2a0ba9['qkRxE']=_0x4963cd(0x1d7,0x1e0,0x20c,0x1ac),_0x2a0ba9[_0x4963cd(0x174,0x197,0x1be,0x1ab)]=_0x1720f1(-0x1e4,-0x1b0,-0x213,-0x1e0);var _0x35fef4=_0x2a0ba9,_0x2e3fae=document['getElement'+_0x4963cd(0x198,0x1c1,0x1ee,0x1d5)](_0x35fef4['OFRkb']),_0x335e5e={};_0x335e5e[_0x1720f1(-0x1e2,-0x1dc,-0x1e7,-0x1dd)+'o']=crSize;var _0x43a362=new Cropper(_0x2e3fae,_0x335e5e);function _0x1720f1(_0x574e3e,_0x49e9d0,_0x411ff5,_0x13a998){return _0x39f6e8(_0x574e3e-0x143,_0x49e9d0-0x198,_0x49e9d0,_0x574e3e- -0x3a9);}function _0x4963cd(_0x14407a,_0x50860e,_0x71766a,_0x14b48f){return _0x2c41cc(_0x14407a-0xde,_0x50860e- -0x145,_0x71766a,_0x14b48f-0x170);}document[_0x4963cd(0x20a,0x202,0x1f7,0x218)+_0x4963cd(0x19c,0x1c1,0x1ce,0x1d6)]('crop-butto'+'n')[_0x1720f1(-0x20c,-0x248,-0x1fa,-0x212)+_0x4963cd(0x1b1,0x1de,0x209,0x1c0)](_0x35fef4['Ptisg'],function(){function _0x3853a5(_0x13d653,_0x27d729,_0x26dc6d,_0x33b47c){return _0x1720f1(_0x13d653-0x1f3,_0x27d729,_0x26dc6d-0x131,_0x33b47c-0x105);}function _0x1b0f45(_0x3a4b87,_0x1a8abe,_0x9ae255,_0x1a18d0){return _0x4963cd(_0x3a4b87-0xe0,_0x3a4b87-0x145,_0x9ae255,_0x1a18d0-0x113);}if(_0x35fef4['jOeAi'](_0x35fef4['QrIoc'],_0x3853a5(0x54,0x71,0x8a,0x1a))){var _0x131066=_0x43a362[_0x3853a5(0x3b,0x64,0x29,0x5c)+_0x3853a5(0x4,0x2,0x10,-0x30)]()[_0x1b0f45(0x327,0x362,0x329,0x325)]();angular[_0x3853a5(-0xb,0x2a,-0x15,-0x26)](document['getElement'+_0x3853a5(0x10,0x27,-0x10,0x19)](_0x1b0f45(0x339,0x354,0x370,0x362)+'n'))[_0x3853a5(0x29,0x22,0x29,0x35)]()['uploadL'](_0x131066);}else{var _0x2c27e2=_0x3738cb['apply'](_0x4f8272,arguments);return _0x5cd05e=null,_0x2c27e2;}}),document[_0x4963cd(0x1c9,0x202,0x20d,0x1e6)+_0x4963cd(0x1f2,0x1c1,0x1c9,0x1ae)](_0x35fef4[_0x1720f1(-0x1c5,-0x1db,-0x19e,-0x1ec)])['addEventLi'+_0x4963cd(0x1e3,0x1de,0x1f4,0x1f1)](_0x35fef4[_0x1720f1(-0x1d3,-0x20c,-0x1b8,-0x1be)],function(){function _0x338969(_0x267659,_0x513717,_0x1ded31,_0x4e4788){return _0x4963cd(_0x267659-0x13c,_0x4e4788- -0x138,_0x513717,_0x4e4788-0x10);}function _0x47fa8d(_0x26b10c,_0xfba0b0,_0x570155,_0x2dd6eb){return _0x1720f1(_0x2dd6eb-0x435,_0xfba0b0,_0x570155-0x143,_0x2dd6eb-0x18d);}if(_0x35fef4[_0x47fa8d(0x263,0x2c3,0x2c0,0x295)]!==_0x35fef4[_0x338969(0xb7,0xa7,0xa5,0xcc)])_0x2dfd46[_0x338969(0x82,0xa0,0x69,0x72)][_0x47fa8d(0x266,0x2a5,0x297,0x269)]=_0x47fa8d(0x250,0x263,0x266,0x267)+_0x338969(0xd6,0xcd,0x99,0xd4)+_0x338969(0xe8,0xd2,0xc3,0xaf);else{let _0x597f25=document[_0x47fa8d(0x2a9,0x262,0x294,0x286)+_0x47fa8d(0x210,0x249,0x234,0x24b)]('a');_0x597f25[_0x338969(0xb1,0xca,0xd0,0xa0)]=_0x43a362['getCropped'+_0x47fa8d(0x23b,0x230,0x23a,0x246)]()[_0x338969(0xbc,0x94,0x97,0xaa)](),_0x597f25[_0x338969(0xc7,0xae,0x8d,0x8c)]=_0x35fef4[_0x338969(0x9c,0x7d,0x5a,0x93)],document[_0x47fa8d(0x298,0x272,0x250,0x28a)][_0x47fa8d(0x215,0x261,0x213,0x24a)+'d'](_0x597f25),_0x597f25[_0x47fa8d(0x267,0x24c,0x24d,0x244)](),_0x597f25[_0x47fa8d(0x200,0x254,0x20d,0x234)],document[_0x47fa8d(0x264,0x268,0x2a8,0x28a)][_0x47fa8d(0x270,0x27b,0x2ac,0x28c)+'d'](_0x597f25);}}),document[_0x4963cd(0x1cc,0x1b0,0x1ce,0x19d)+_0x1720f1(-0x1dc,-0x1a1,-0x202,-0x1eb)](_0x35fef4[_0x1720f1(-0x20d,-0x210,-0x1e3,-0x225)])[_0x4963cd(0x15e,0x198,0x161,0x1ac)+_0x4963cd(0x1d4,0x1de,0x1ac,0x1c1)](_0x35fef4['Ptisg'],function(){_0x43a362[_0x163578(0x2e8,0x2e3,0x2b7,0x2db)](),document['querySelec'+_0x24a9e0(0x58c,0x599,0x5b7,0x582)](_0x35fef4[_0x24a9e0(0x58e,0x578,0x554,0x580)])['style'][_0x163578(0x294,0x2d7,0x2a2,0x2b3)]='none';function _0x24a9e0(_0x2deecf,_0x5e274e,_0x46b958,_0xcb72d4){return _0x1720f1(_0xcb72d4-0x75e,_0x5e274e,_0x46b958-0x1bb,_0xcb72d4-0x180);}function _0x163578(_0xea6cf3,_0x2c7df3,_0x23bb15,_0x4c6fdf){return _0x4963cd(_0xea6cf3-0x14a,_0x23bb15-0xac,_0xea6cf3,_0x4c6fdf-0x1de);}document[_0x163578(0x25a,0x273,0x25c,0x291)+'tor'](_0x35fef4[_0x163578(0x25b,0x292,0x296,0x25c)])['style'][_0x24a9e0(0x5e0,0x58f,0x5af,0x5b0)]=_0x35fef4[_0x24a9e0(0x57a,0x556,0x559,0x557)];});}function fetchImg(_0x429e58){var _0x515bea={};_0x515bea[_0x1d62e8(0x1c,0x4f,0x5e,0x2a)]=_0x1d62e8(0x76,0x49,0x1d,0x54);function _0x1d62e8(_0x11a02e,_0x5279b9,_0x27e4ae,_0x5e247a){return _0x39f6e8(_0x11a02e-0x15c,_0x5279b9-0x16,_0x27e4ae,_0x5279b9- -0x15a);}_0x515bea[_0x169c97(0x5a6,0x5d8,0x5df,0x5aa)]=_0x1d62e8(0x91,0x99,0x6c,0x7a),_0x515bea[_0x169c97(0x5b6,0x5e0,0x5d2,0x5a8)]='#crop-img-'+'b';function _0x169c97(_0x1f8ba8,_0x2b2033,_0x3beaf9,_0x650ce4){return _0x39f6e8(_0x1f8ba8-0x124,_0x2b2033-0x109,_0x1f8ba8,_0x650ce4-0x403);}_0x515bea[_0x1d62e8(0x61,0x4c,0x1b,0x86)]=_0x169c97(0x5cc,0x5e5,0x5e3,0x5bf);var _0x101b32=_0x515bea;document[_0x169c97(0x5a7,0x5b7,0x57e,0x5b8)+_0x169c97(0x598,0x5df,0x5b7,0x5d0)](_0x101b32[_0x1d62e8(0x82,0x4f,0x2f,0x49)])[_0x1d62e8(0x62,0x7d,0xaa,0x94)][_0x169c97(0x5d2,0x5e5,0x603,0x5fe)]=_0x101b32['glHCW'];let _0x39537e=document['querySelec'+'tor'](_0x101b32[_0x1d62e8(0x4a,0x4b,0x49,0x53)]);_0x39537e[_0x169c97(0x5a7,0x5b9,0x606,0x5da)][_0x169c97(0x622,0x5e9,0x609,0x5fe)]='block',_0x39537e[_0x169c97(0x5dc,0x5cf,0x5e1,0x5b8)+_0x1d62e8(0xaa,0x73,0x8f,0x73)](_0x101b32[_0x169c97(0x5d9,0x5bb,0x5ae,0x5a9)])[_0x1d62e8(0xbf,0x86,0x83,0x7a)]=_0x429e58,setTimeout(initCropper,-0x18de*0x1+0x13*0x9+0x1c1b*0x1);} </script>
        
  let user_client_id = "509581293681-q82nlbr0pfdg29enqcs0e47k2mcbjjj8.apps.googleusercontent.com";


  window.gapiCallbacks = [];

  function gapiLoaded() {
    gapi.auth.init(function() {
      gapi.client.load('drive', 'v2').then(function () {
        var GapiQueue = function () {
          this.push = function (callback) {
            setTimeout(callback, 0);
          };
        };

        var _old_gapiCallbacks = window.gapiCallbacks;

        window.gapiCallbacks = new GapiQueue();

        _old_gapiCallbacks.forEach(function (callback) {
          window.gapiCallbacks.push(callback);
        });
      }, function(reason) {
        console.log(reason);
      });
    });
  }

  'use strict';

  angular.module('driveApp', [])
  .controller('driveController', function($scope, gapiAuthService, driveService) {

    $scope.checkingLogin = true;
    gapiAuthService.checkLogin().then(function() {
      $scope.loggedIn = true;
    }, function() {
      $scope.loggedIn = false;
    }).finally(function() {
      $scope.checkingLogin = false;
    });

    $scope.login = function() {
      gapiAuthService.login().then(function() {
        $scope.loggedIn = true;
      }, function(authResult) {
        $scope.loggedIn = false;
        console.log(authResult);
      })
    };


    $scope.uploadL = function(l) {
      url2Img(l);
    }

    function url2Img(url) {
      $scope.uploading = true;
      var request22 = new XMLHttpRequest();
      request22.open('GET', url, true);
      request22.responseType = 'blob';
      request22.onload = function() {
        var file = request22.response;
        driveService.insertFile(file, file.name).then(function(link) {
          document.querySelector('#ws-i-l').value = link;
          document.querySelector('#link-con').classList.add('active');
        }).finally(function() {
          $scope.uploading = false;
        });

      }
      request22.send();

    }

    $scope.images = [];

    $scope.clickFileUpload = function() {
      document.getElementById('uploadImage').click();
    };

    $scope.upload = function() {
      $scope.uploading = true;
      var allFiles = document.getElementById('uploadImage').files;
      var file = allFiles[0];

      driveService.insertFile(file, file.name).then(function(link) {
        document.querySelector('#ws-i-l').value = link;
        document.querySelector('#link-con').classList.add('active');
      }).finally(function() {
        $scope.uploading = false;
      });
    }

  });

  angular.module('driveApp')
  .factory('gapiAuthService', function ($q) {
    var client_id = user_client_id;
    var scope = ['https://www.googleapis.com/auth/drive.file'];

    function getConfig(immediate) {
      return {
        'client_id': client_id,
        'scope': scope,
        immediate: immediate
      }
    }

    function isTokenNeedsRefresh(token) {
      return !token || moment.duration(moment(token.expires_at*1000).valueOf()-moment().valueOf()).minutes() < 10;
    }

    return {
      checkLogin: function() {
        var deferred = $q.defer();

        gapiCallbacks.push(function () {
          if (isTokenNeedsRefresh(gapi.auth.getToken())) {
            gapi.auth.authorize(getConfig(true), function (authResult) {
              if (authResult && !authResult.error) {
                deferred.resolve(gapi.auth.getToken().access_token);
              } else {
                deferred.reject(authResult);
              }
            })
          } else {
            deferred.resolve(gapi.auth.getToken().access_token);
          }
        });

        return deferred.promise;
      },

      login: function() {
        var deferred = $q.defer();

        this.checkLogin().then(function (accessToken) {
          deferred.resolve(accessToken);
        },
          function () {
            gapi.auth.authorize(getConfig(false), function (authResult) {
              if (authResult && !authResult.error) {
                deferred.resolve(gapi.auth.getToken().access_token);
              } else {
                deferred.reject(authResult);
              }
            })
          });

        return deferred.promise;
      }
    }


  });

  angular.module('driveApp')
  .factory('driveService', function ($q, gapiAuthService) {
    function createFolder() {
      return gapi.client.drive.files.insert(
        {
          'resource': {
            "title": '3schools.in',
            "mimeType": "application/vnd.google-apps.folder"
          }
        }
      )
    }

    function ensureUploadFolderPresent() {
      return gapi.client.drive.files.list(
        {
          q: "mimeType = 'application/vnd.google-apps.folder' and trashed = false"
        }
      ).then(function(files) {
          var directory = files.result.items;

          if (!directory.length) {
            return createFolder().then(function(res) {
              return res.result;
            });
          } else {
            return directory[0];
          }
        });
    }

    function insertFile(fileData, filename,
      parentId) {
      var deferred = $q.defer();

      var boundary = '3schools';
      var delimiter = "\r\n--" + boundary + "\r\n";
      var close_delim = "\r\n--" + boundary + "--";

      var reader = new FileReader();
      reader.readAsBinaryString(fileData);
      reader.onload = function (e) {
        var contentType = fileData.type || 'application/octet-stream';
        var metadata = {
          'title': filename,
          'mimeType': contentType,
          "parents": [{
            "id": parentId
          }]
        };

        var base64Data = btoa(reader.result);
        var multipartRequestBody =
        delimiter +
        'Content-Type: application/json\r\n\r\n' +
        JSON.stringify(metadata) +
        delimiter +
        'Content-Type: ' + contentType + '\r\n' +
        'Content-Transfer-Encoding: base64\r\n' +
        '\r\n' +
        base64Data +
        close_delim;

        var request = gapi.client.request({
          'path': '/upload/drive/v2/files',
          'method': 'POST',
          'params': {
            'uploadType': 'multipart'
          },
          'headers': {
            'Content-Type': 'multipart/mixed; boundary="' + boundary + '"'
          },
          'body': multipartRequestBody
        });
        request.then(function(file) {
          deferred.resolve(file.result);
        },
          function(reason) {
            deferred.reject(reason);
          });
      };

      return deferred.promise;
    }

    function waitForFileToBecomeActive(fileId) {
      var deferred = $q.defer();

      gapi.client.request({
        'path': '/drive/v2/files/'+fileId,
        'method': 'GET'
      }).then(function() {
        deferred.resolve();
      },
        function() {
          setTimeout(function() {
            waitForFileToBecomeActive(fileId).then(function() {
              deferred.resolve();
            }, function(reason) {
              deferred.reject(reason);
            })
          }, 1000);
        });

      return deferred.promise;
    }

    function insertPermission(file) {

      return gapi.client.drive.permissions.insert({
        'fileId': file.id,
        'resource': {
          "withLink": true,
          "role": "reader",
          "type": "anyone"
        }
      })
    }

    return {
      insertFile: function (fileData, filename) {
        return gapiAuthService.login()
        .then(function() {
          return ensureUploadFolderPresent();
        }).then(function(directory) {
          return insertFile(fileData, filename, directory.id);
        }).then(function(file) {
          return waitForFileToBecomeActive(file.id).then(function() {
            return insertPermission(file).then(function() {
              return file.webContentLink;
            });
          });
        });
      }
    }
  });
    </script>
<script src="https://apis.google.com/js/client.js?onload=gapiLoaded"></script>

</body>
</html>
